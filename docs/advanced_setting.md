# Расширенная настройка бота
### Словарь (автоответчик)
Используйте метод `bot.dict.import(obj)`, вместо **obj** используя объект в формате *запрос: ответ*

Пример:
```
bot.dict.import({
    'Один': 'One',
    'Два': 'Two'
});
```
### Команды
Используйте метод `bot.msgevent.on(command, callback)`, вместо **command** используя строку, обозначающую команду без аргументов

Пример:
```
bot.msgevent.on('2+2', function(peer){
    bot.sendmsg(peer.type, peer.id, '2+2=5')
});
```

С версии 2.1.0 вы можете установить имя бота при инициализации на false(boolean) и получать события о всех сообщениях:
```
const bot = require('./bot');
bot.init(false, 'access_token', 'rucaptcha_key');

bot.msgevent.on('newmsg', function(peer){
    // Обработка полученного сообщения, не связанного с обращением к боту
});
```

#### Строение объекта peer
```
Для сообщений из беседы:
{
  type: 'conv', //Показывает, что сообщение из беседы, строка
  name: 'sBot Test', //Название беседы, строка
  id: 681, //ID беседы, число
  msgid: 2262051, //ID сообщения, число
  msg: {
    full: 'Test', //Полный текст сообщения, строка
    args: ['Test'] //Аргументы команды (если есть), массив
  },
  s: {
    id: 193158046, //ID отправителя, число
    fname: 'Евгений', //Имя отправителя, строка
    lname: 'Малевич' //Фамилия отправителя, строка
  }
}

Для личных сообщений:
{
  type: 'user', //Показывает, что сообщение от пользователя, строка
  id: 193158046, //ID отправителя, число
  msgid: 2262101, //ID сообщения, число
  msg: {
    full: 'Test', //Полный текст сообщения, строка
    args: ['Test'] //Аргументы команды (если есть), массив
  },
  s: {
    fname: 'Евгений', //Имя отправителя, строка
    lname: 'Малевич' //Фамилия отправителя, строка
  }
}
```

#### Синтаксис метода bot.sendmsg()
```
bot.sendmsg(type, id, text, attachment, stickerid, callback)
```
- **type** - Тип сообщения (личное, беседа), строка
- **id** - ID, куда нужно отправить сообщение (id пользователя или беседы), число
- **text** - Отправляемый текст сообщения, строка
- **attachment** - Медиафайл для прикрепления (аудио, видео, документ), строка
- **stickerid** - ID стикера, который надо прикрепить, число
- **callback** - Функция, выполняемая после отправки

#### Загрузка медиафайлов
```
bot.VK.upload('photo', {data: d}, function(r){
  console.log(r) // photo12345_67890
})
```

- **type** - Типа медиафайла, список приведён ниже
- **data** - Медиафайл, может быть получен с помощью `fs.createReadStream()`

#### Остальные методы и их синтаксис
1. `bot.getVer()` - Возвращает строку, содержащую версию sBot
2. `bot.getArgs(peer)` - Возвращает массив, содержащий аргументы (слова после команды), например `sBot, привет как дела? -> ['как', 'дела?']`
3. `bot.getAnswer(peer)` - Возвращает строку, содержащую обращение к пользователю, например `[id193158046|Евгений],` (ТОЛЬКО ДЛЯ БЕСЕД)

#### Список типов медиафайлов
- `audio_msg` - Голосовое сообщение (документ)
- `graffiti` - Граффити (документ)
- `photo` - Фото для отправки в сообщения
