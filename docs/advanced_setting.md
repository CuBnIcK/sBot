# Расширенная настройка бота
### Словарь (автоответчик)
Используйте метод `bot.dict.import(obj)`, вместо **obj** используя объект в формате *запрос: ответ*

Пример:
```JavaScript
bot.dict.import({
    'Один': 'One',
    'Два': 'Two'
});
```
### Команды
Используйте метод `bot.msgevent.on(command, callback)`, вместо **command** используя строку, обозначающую команду без аргументов

Пример:
```JavaScript
bot.msgevent.on('2+2', function(peer){
    bot.sendmsg(peer.type, peer.id, '2+2=5')
});
```

С версии 2.1.0 вы можете получать все сообщения используя событие `newmsg`:
```JavaScript
bot.msgevent.on('newmsg', function(peer){
    // Обработка полученного сообщения, независимо от обращения
});
```
Также вы можете получать все сообщения используя `amsgevent`:
```JavaScript
const bot = require('./bot');
bot.init(false, 'access_token', 'rucaptcha_key');

bot.amsgevent.on('Привет!', function(peer){
    // Обработка полученного сообщения, независимо от обращения
    console.log(peer.msg.full)
    // Выведет "Привет!"
});
```

#### Строение объекта peer
```JavaScript
Для сообщений из беседы:
{
  type: 'conv', //Показывает, что сообщение из беседы, строка
  name: 'sBot Test', //Название беседы, строка
  id: 681, //ID беседы, число
  msgid: 2262051, //ID сообщения, число
  msg: {
    full: 'Test', //Полный текст сообщения, строка
    args: ['Test'] //Аргументы команды (если есть), массив
  },
  s: {
    id: 193158046, //ID отправителя, число
    fname: 'Евгений', //Имя отправителя, строка
    lname: 'Малевич' //Фамилия отправителя, строка
  }
}

Для личных сообщений:
{
  type: 'user', //Показывает, что сообщение от пользователя, строка
  id: 193158046, //ID отправителя, число
  msgid: 2262101, //ID сообщения, число
  msg: {
    full: 'Test', //Полный текст сообщения, строка
    args: ['Test'] //Аргументы команды (если есть), массив
  },
  s: {
    fname: 'Евгений', //Имя отправителя, строка
    lname: 'Малевич' //Фамилия отправителя, строка
  }
}
```
### Использование методов VK API
Используйте метод `bot.VK.call(method, args)`, где **method** - необходимый вам метод(строка), а **args** - аргументы метода(объект)
```JavaScript
bot.VK.call('users.get', {user_ids: 1})
  .then(res => console.log(res));

// Выведет:
// [ { id: 1, first_name: 'Павел', last_name: 'Дуров' } ]
```

### Ответ с помощью peer.answer()
#### Синтаксис метода


```JavaScript
peer.answer(text, attachment, stickerid)
```  
_ИЛИ_  
```JavaScript
peer.answer(text, {attachment: 'photo12345_67890', stickerid: 123})
```  
_ИЛИ_  
```JavaScript
peer.answer({attachment: 'photo12345_67890', stickerid: 123})
```  

- **text** - Отправляемый текст сообщения, строка
- **attachment** - Медиафайл для прикрепления (аудио, видео, документ), строка
- **stickerid** - ID стикера, который надо прикрепить, число


### Синтаксис метода bot.sendmsg()
```JavaScript
bot.sendmsg(type, id, text, attachment, stickerid, callback)
```
- **type** - Тип сообщения (личное, беседа), строка
- **id** - ID, куда нужно отправить сообщение (id пользователя или беседы), число
- **text** - Отправляемый текст сообщения, строка
- **attachment** - Медиафайл для прикрепления (аудио, видео, документ), строка
- **stickerid** - ID стикера, который надо прикрепить, число
- **callback** - Функция, выполняемая после отправки

#### Загрузка медиафайлов
```JavaScript
bot.VK.upload('photo', {data: d}, function(r){
  console.log(r) // photo12345_67890
})
```

- **type** - Типа медиафайла, список приведён ниже
- **data** - Сам медиафайл (Buffer)

#### Остальные методы и их синтаксис
1. `bot.getArgs(peer)` - Возвращает массив, содержащий аргументы (слова после команды), например `sBot, привет как дела? -> ['как', 'дела?']`
2. `bot.getAnswer(peer)` - Возвращает строку, содержащую обращение к пользователю, например `[id193158046|Евгений],` (ТОЛЬКО ДЛЯ БЕСЕД)
3. Поле `bot.version.codenum` - Возвращает версию sBot (номер + кодовое имя)
4. Поле `bot.version.num` - Возвращает версию sBot (только номер)

#### Список типов медиафайлов
- `audio_msg` - Голосовое сообщение (документ)
- `graffiti` - Граффити (документ)
- `photo` - Фото для отправки в сообщения
